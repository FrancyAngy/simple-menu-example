controller.B.onEvent(ControllerButtonEvent.Pressed, function () {
    if (menuIsVisible) {
        myMenu.close()
        console.log("menu closed")
        menuIsVisible = false
    }
})
controller.menu.onEvent(ControllerButtonEvent.Pressed, function () {
    if (!(menuIsVisible)) {
        menuIsVisible = true
        console.log("menu opened")
        myMenu = miniMenu.createMenu(
        miniMenu.createMenuItem("Party"),
        miniMenu.createMenuItem("Equipment"),
        miniMenu.createMenuItem("Items"),
        miniMenu.createMenuItem("Skills"),
        miniMenu.createMenuItem("test1"),
        miniMenu.createMenuItem("test2"),
        miniMenu.createMenuItem("test3"),
        miniMenu.createMenuItem("Option")
        )
        console.logValue("myMenu", myMenu)
        myMenu.onButtonPressed(controller.A, function (selection, selectedIndex) {
            myMenu.close()
            console.log("menu closed")
            console.log("selection = " + selection)
            console.log("selectedIndex = " + selectedIndex)
            mySprite.sayText("You chose \"" + selection + "\", which is the entry number " + selectedIndex, 2000, false)
            menuIsVisible = false
        })
    } else {
        myMenu.close()
        menuIsVisible = false
    }
})
let myMenu: miniMenu.MenuSprite = null
let menuIsVisible = false
let mySprite: Sprite = null
scene.setBackgroundImage(img`
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999222299999999999999999999999999999999999999999999999999999999999992222229999999999999999999999999999999999999999999999999999999999999
    9999999999999999222299999922222222299999999999999999999999999999999999222222229999999999992222222222299999999999999999999999999999999999999999999999999999999999
    9999999999992222222299999922222222299999999999222222222222229999999992222222222299999999922222222222229999999999999999999999999999999999999999999999999999999999
    9999999999222222222229999922222222229999999999222222222222229999999992222222222229999999922222299222222999999999999999999999999999999999999999999999999999999999
    9999999992222222222229999922299922222999999999222222222222229999999922222999222229999999922229999992222999999999999999999999999999999999999999999999999999999999
    9999999922222229992222999222299992222999999999222992222999999999999922229999922229999999922299999999222999999999999999999999999999999999999999999999999999999999
    9999999222222999992222999222299992222999999999222999999999999999999922229999992229999999922229999999222999999999999999999999999999999999999999999999999999999999
    9999999222299999999222999222999999222999999999222999999999999999999922299999999999999999922229999999999999999999999999999999999999999999999999999999999999999999
    9999999222299999999222999222999999222999999999222999999999999999999922299999999999999999992222299999999999999999999999999999999999999999999999999999999999999999
    9999999222999999999222999222999999222999999992222999999999999999999922229999999999999999992222222229999999999999999999999999999999999999999999999999999999999999
    9999999222999999992222999222999999222999999992222999999999999999999922222999999999999999992222222222229999999999999999999999999999999999999999999999999999999999
    9999999222999999992222999222999999222999999992229999999999999999999922222229222229999999999922222222222999999999999999999999999999999999999999999999999999999999
    9999999222999999992229999222299999222999999992222222222222999999999999222222222222999999999999999222222999999999999999999999999999999999999999999999999999999999
    9999999222999999922229999222299999222999999992222222222222299999999999922222222222299999999999999992222999999999999999999999999999999999999999999999999999999999
    9999999222999999222229999922299992222999999992222222222222299999999999992222229222229999999999999999222999999999999999999999999999999999999999999999999999999999
    9999999222222222222299999922299992222999999992229999999922299999999999999999999922229999999999999999222999999999999999999999999999999999999999999999999999999999
    9999999222222222222299999922222222229999999992229999999999999999999999999999999922229999999999999999222999999999999999999999999999999999999999999999999999999999
    9999999222222222229999999922222222229999999992229999999999999999999999999999999922229999999999999992222999999999999999999999999999999999999999999999999999999999
    9999999922299222999999999922222222229999999992229999999999999999999999999999999222229999992229999222222999999999999999999999999999999999999999999999999999999999
    9999999922299999999999999922222222999999999922229999999999999999999999222999922222229999992222222222229999999999999999999999999999999999999999999999999999999999
    9999999922299999999999999222292222229999999922222222222299999999999999222222222222299999992222222222229999999999999999999999999999999999999999999999999999999999
    9999999922299999999999999222299222222299999922222222222222229999999999222222222222999999992222222222999999999999999999999999999999999999999999999999999999999999
    9999999922299999999999999222999922222229999992222222222222229999999999922222222299999999999922229999999999999999999999999999999999999999999999999999999999999999
    9999999922299999999999999222999999222229999992222999992222229999999999999922229999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999922299999999999999222999999992229999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999922299999999999999222999999992229999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999922299999999999999222999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999222999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999222222999999999992222999999999999999999999222222229999922299999999999922299999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999992222222222999999922222222299999999999922222222222229999922229999999999922299992222999999999999999999999999999999999999999999999999999999999999999999
    9999999999922222222222229999222222222229999999992222222222222229999922222999999999922299992222999999999999999222999999999999999999999999999999999999999999999999
    9999999999922222922222229999222222222229999999992222222229999999999922222299999999922299992222999999999999999222999999999999999999999999999999999999999999999999
    9999999999222299999922222992222299922222999999992229999999999999999922222229999999922299992229999999999999999222999999999999999999999999999999999999999999999999
    9999999999222299999992222992222999992222999999992229999999999999999922222229999999922299922229999999999999992222999999999999999999999999999999999999999999999999
    9999999992222999999999222292229999999222999999992229999999999999999922222222999999222299922229999999999999922222999999999999999999999999999999999999999999999999
    9999999992222999999999222222229999999222999999992229999999999999999922292222299999222299922299999999999999922229999999999999999999999999999999999999999999999999
    9999999992229999999999922222229999999222299999922229999999999999999922299222229999222999222299999999999999222229999999999999999999999999999999999999999999999999
    9999999992229999999999922222299999999222299999922229999999999999999922299922229999222999222299999999999999222299999999999999999999999999999999999999999999999999
    9999999992229999999999922222299999999222299999922299999999999999999922299992229999222999222299999999999999222299999999999999999999999999999999999999999999999999
    9999999922229999999999922222299999999922299999922222222999999999999222299992229992222999222999999999999999222999999999999999999999999999999999999999999999999999
    9999999922229999999999922222299999999922299999222222222222999999999222299992222992222999222999999999999999222999999999999999999999999999999999999999999999999999
    9999999922299999999999922222299999999922299999222222222222999999999222999992222992229999222999999999999999222999999999999999999999999999999999999999999999999999
    9999999922229999999999992222999999999922299999222222922222999999999222999999222292229999222999999999999992222999999999999999999999999999999999999999999999999999
    9999999922229999999999992222999999999922299999222299999999999999999222299999222222229999222999999999999992222999999999999999999999999999999999999999999999999999
    9999999922229999999999922229999999999922229999922299999999999999999222299999922222229999222999999999999992222999999999999999999999999999999999999999999999999999
    9999999992229999999999922229999999999922229999922299999999999999999922299999922222299999222299999999999922229999999999999999999999999999999999999999999999999999
    9999999992229999999999922229999999999922229999922299999999999999999922299999922222299999222299999999999222229999999999999999999999999999999999999999999999999999
    9999999992229999999999922229999999999922229999922299999999999999999922299999992222299999922229999999992222299999999999999999999999999999999999999999999999999999
    9999999992222999999999999999999999999222299999922299999999999999999922299999992222299999922222229999222222299999999999999999999999999999999999999999999999999999
    9999999992222999999999999999999999999222299999922222222222999999999222299999999222299999922222222222222222999999999999999999999999999999999999999999999999999999
    9999999992222999999999999999999999999222999999922222222222222999999222299999999222299999992222222222222229999999999999999999999999999999999999999999999999999999
    9999999999222999999999999999999999999222999999922222222222222999999222999999999222299999999999222222229999999999999999999999999999999999999999999999999999999999
    9999999999222999999999999999999999999222999999992222299922222999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999222299999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999222299999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999922299999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999922222299999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999922222222222999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999222222222222999999922222229999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999992222222992222299999222222222299999999222229999999999999222999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999992222999999222299999222222222299999999222229999999999999222999999999999
    9999999999999999999999999999999999999222999999999999999999999999999999999222229999999999922229999999922299992222299222299999999222222999999999999222999999999999
    9999922222222222222299999999999999922222222229999999999999999999999922222222222229999999922229999999922299922222999999999999992222222299999999999222299999999999
    9999922222222222222222222299999992222222222222299999999999999999999922222222222229999999922299999999922299922229999999999999992222222229999999999222299999999999
    9999922222222222222222222299999992222222222222229999999999999999999222222229222222299999922299999999922299922229999999999999992229922229999999999922299999999999
    9999999999999992222222222299999922222999992222222999999999999999992222299999992222299999922299999999922299922299999999999999992229992229999999999922299999999999
    9999999999999922229999999999999922229999999922222999999999999999992222999999999222229999922299999999222299922299999999999999992229992222999999999922299999999999
    9999999999999922229999999999999222299999999992222299999999999999922229999999999922229999922299999992222299922299999999999999992229992222999999999922299999999999
    9999999999999922229999999999992222299999999999222299999999999999222229999999999992222999922299999992222999922299999999999999992229999222299999999222299999999999
    9999999999999222299999999999992222999999999999222299999999999999222299999999999992222999922299999922222999922292222222222999992229999222229999999222299999999999
    9999999999999222299999999999922229999999999999922299999999999992222999999999999999222999922299999222229999922222222222222999992229999922222999999222299999999999
    9999999999999222999999999999922229999999999999922229999999999922222999999999999999222999922222222222299999922222222222222999992229999992222999999222999999999999
    9999999999999222999999999999922299999999999999922229999999999222229999999999999999222999922222222222299999922222299999999999992229999999222999999222999999999999
    9999999999999222999999999999922299999999999999922229999999999222299999999999999999222999922222222222999999922299999999999999992229999999222299999222999999999999
    9999999999999222999999999999922299999999999999922229999999999222299999999999999999222999922299222299999999922299999999999999992229999999222299992222999999999999
    9999999999999222999999999999922299999999999999922229999999999222299999999999999999222999922299999999999999922299999999999999992229999999922299992222999999999999
    9999999999999222999999999999922229999999999999922299999999999222299999999999999992222999922299999999999999922229999999999999992222999999922299992229999999999999
    9999999999999222999999999999922222999999999999922299999999999922299999999999999992222999922299999999999999922229999999999999992222999999922229992229999999999999
    9999999999999222999999999999992222999999999999222299999999999922229999999999999992229999922299999999999999922222299999999999999222999999922229922229999999999999
    9999999999999222999999999999992222299999999999222299999999999922222999999999999922229999922299999999999999992222222222299999999222999999992222222229999999999999
    9999999999992222999999999999999222222999999922222999999999999992222299999999999222229999922229999999999999999222222222299999999222999999992222222299999999999999
    9999999999992222999999999999999222222299992222222999999999999992222222999999992222299999922229999999999999999992222222299999999222999999999222222999999999999999
    9999999999992222999999999999999922222222222222229999999999999999222222299999922222999999992229999999999999999999999999999999999222999999999222229999999999999999
    9999999999999999999999999999999999222222222222299999999999999999992222222222222222999999992229999999999999999999999999999999999999999999999922229999999999999999
    9999999999999999999999999999999999992222222229999999999999999999999222222222222229999999999999999999999999999999999999999999999999999999999992229999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999992222222222299999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
    `)
mySprite = sprites.create(img`
    . . . b 5 b . . . . . . . . . . 
    . . . . b 5 b . . . . . . . . . 
    . . . . . c b . . . . . . . . . 
    . . . . b b b b b b . . . . . . 
    . . . b 5 5 5 5 5 b b . . . . . 
    . . f d 5 5 f 1 d 5 b b . . . . 
    . . c 4 d 5 f f 1 5 5 b . . . . 
    . . 4 4 d d b f d 5 5 b . . . . 
    b 4 4 4 4 4 5 5 5 d b b d d d b 
    . b 4 4 4 4 4 5 5 b 5 5 5 d b b 
    . . b 5 5 5 5 5 d 5 5 5 5 c d b 
    . b 5 5 5 5 5 5 b 5 5 d c d d c 
    . b 5 5 5 5 5 5 5 b c c d d b c 
    . b d 5 5 5 5 5 d d d d d d c . 
    . . b b 5 5 5 d d d d d b c . . 
    . . . b b c c c c c c c c . . . 
    `, SpriteKind.Player)
mySprite.setPosition(130, 50)
